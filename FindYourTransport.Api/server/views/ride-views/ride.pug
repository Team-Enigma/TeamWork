extends ../base

block app-title
        | Ride: #{ride.fromCity} to #{ride.toCity}

block content
    - var isPassenger = false;
    div.ride-detailed-container
        .row
            .col-lg-12
                .row.main-row
                    .col-lg-5.font-xlg.text-center
                        span #{ride.fromCity}
                    .col-lg-2.font-lg.text-center
                        span.glyphicon.glyphicon-chevron-right
                    .col-lg-5.font-xlg.text-center
                        span #{ride.toCity}
                hr
        .row
            .col-lg-12
                ul.nav.nav-tabs
                    li.active
                        a.tab-title(href='#information', data-toggle='tab', aria-expanded='true') Information
                    li
                        a.tab-title(href='#passengers', data-toggle='tab', aria-expanded='false') Passengers
                #my-tab-content.tab-content
                    #information.tab-pane.fade.active.in
                        .matchheight.detailed-information
                            ul
                                li
                                    span Driver:&nbsp
                                    a(href=`/users/${ride.driver.username}`) #{ride.driver.username}
                                li
                                    span Date of travel:&nbsp
                                    | #{moment(ride.dateOfTravel).format("lll")}
                                li
                                    span Available seats:&nbsp
                                    | #{ride.freePlaces}
                                li
                                    span Price:&nbsp
                                    | #{ride.price}
                                li
                                    span Contact information:
                                    p #{ride.contact}
                                li
                                    span Detailed information:
                                    p #{ride.remarks}
                    #passengers.tab-pane.fade
                        .matchheight.detailed-information
                            if ride.passengers.length > 0
                                ul
                                    each passenger in ride.passengers
                                        li
                                            a(href=`/users/${passenger}`) #{passenger}
                                        if(user.username === passenger)
                                            -isPassenger = true
                            else
                                ul
                                    li No passengers signed for this travel
        if(user.username !== ride.driver && !isPassenger)
            .row
                .col-lg-12
                    hr
            .row.centered
                form(action="/sign-for-ride" method="post")
                    input.hidden(type="text" value=`${ride.id}` name="rideId")
                    input.hidden(type="text" value=`${user.username}` name="passengerUsername")
                    input.btn.btn-success.btn-special(type="submit" value="Sign for it")

        script(type='text/javascript').
            jQuery(function($){
            $('.matchheight').matchHeight({byRow: false});
            });